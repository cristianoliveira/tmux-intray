# golangci-lint configuration for tmux-intray
# Focus on complexity metrics with conservative thresholds for existing codebase
version: "2"

run:
  # Default timeout for analysis
  timeout: 5m



# Linter settings
linters:
  # Enable specific linters
  enable:
    - gocyclo      # Cyclomatic complexity
    - gocognit     # Cognitive complexity
    # Note: funlen disabled due to golangci-lint 2.8.0 bug where exclude-files
    # doesn't work for this linter, causing false positives in test files.
    # Test files have different requirements (setup, assertions, test cases).
    # - funlen       # Function length
    - nestif       # Nested if statements
    - staticcheck  # Static analysis
    - errcheck     # Error checking

  # Disable default linters we don't want
  disable:
    - govet
    - unused
    - ineffassign
    - revive
    - funlen       # Disabled due to bug in golangci-lint 2.8.0

# Linter-specific configuration
linters-settings:
  gocyclo:
    min-complexity: 20
  gocognit:
    min-complexity: 30
  nestif:
    min-complexity: 5

# Severity settings
issues:
  # Maximum allowed issues with same text (0 = unlimited)
  max-same: 0
  # Maximum allowed issues (0 = unlimited)
  max: 0
  # Exclude generated files
  exclude-generated: true
  # Exclude files with default patterns
  exclude-files:
    - ".*_gen\\.go$"
    - "integration/.*\\.go$"
  exclude-dirs:
    - .tmp
    - .gwt
    - .bv
    - .local
    - tmp
    - vendor
    - integration
    - integration/cmd
  # Exclude rules
  exclude-rules:
    # Exclude errcheck for test files (common to ignore errors in tests)
    - path: _test\.go
      linters:
        - errcheck
    # Exclude gocyclo for generated files
    - path: _gen\.go
      linters:
        - gocyclo
        - gocognit

# Output format
output:
  format: colored-line-number
  print-issued-lines: true
  print-linter-name: true